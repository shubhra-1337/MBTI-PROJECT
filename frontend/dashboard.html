<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KnowThySelf | Analysis Complete</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg-dark: #00050a;
        --highlight: #00f2ff; /* Neon Cyan */
        --contrast: #2979ff; /* Electric Blue */
        --text-main: #ffffff;
        --text-muted: #8ba4b6;

        --glass-bg: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.03),
          rgba(255, 255, 255, 0.01)
        );
        --glass-border: rgba(255, 255, 255, 0.08);
        --glass-shine: rgba(255, 255, 255, 0.15);
      }
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: "Rajdhani", sans-serif;
        background: var(--bg-dark);
        color: var(--text-main);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 30px;
        overflow-x: hidden;
      }

      .animated-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -2;
        background: radial-gradient(
          circle at 50% 50%,
          #051525 0%,
          #00050a 100%
        );
        background-size: 200% 200%;
        animation: deepPulse 15s ease infinite alternate;
      }
      @keyframes deepPulse {
        0% {
          background-position: 0% 50%;
        }
        100% {
          background-position: 100% 50%;
        }
      }
      #particleCanvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        opacity: 0.6;
      }

      /* --- DASHBOARD WRAPPER --- */
      .dashboard-wrapper {
        width: 100%;
        max-width: 1200px;
        /* Flexbox allows natural wrapping on mobile */
        display: flex;
        flex-wrap: wrap;
        gap: 50px;
        align-items: center;
        justify-content: center;
        animation: fadeIn 0.5s ease;
      }

      /* LEFT: TYPE */
      .type-section {
        text-align: center;
        flex: 1 1 350px; /* Base width 350px, allows growing/shrinking */
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .type-section h2 {
        font-size: 1.2rem;
        color: var(--text-muted);
        letter-spacing: 4px;
        text-transform: uppercase;
        margin-bottom: 10px;
      }

      #resultType {
        /* Fluid Font Size */
        font-size: clamp(5rem, 12vw, 9rem);
        line-height: 1;
        font-weight: 700;

        /* Fallback color for unsupported browsers */
        color: transparent;

        /* Background gradient */
        background: linear-gradient(to bottom, #fff, var(--highlight));

        /* Clipping: prefixed first, then standard for compatibility */
        -webkit-background-clip: text;
        background-clip: text;

        /* Transparent fill */
        -webkit-text-fill-color: transparent;

        /* Optional glow */
        text-shadow: 0 0 60px rgba(0, 242, 255, 0.3);
        margin-bottom: 20px;
      }

      .btn-glow {
        display: inline-block;
        padding: 18px 40px;
        background: rgba(0, 242, 255, 0.05);
        border: 1px solid var(--highlight);
        color: var(--highlight);
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 3px;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        text-shadow: 0 0 8px var(--highlight);
        margin-top: 20px;
      }
      .btn-glow:hover {
        background: var(--highlight);
        color: #000;
        box-shadow: 0 0 40px rgba(0, 242, 255, 0.5);
      }

      /* RIGHT: STATS CARD */
      .content-card {
        flex: 1 1 500px; /* Base width 500px, wraps if screen smaller */
        background: var(--glass-bg);
        backdrop-filter: blur(25px);
        -webkit-backdrop-filter: blur(25px);
        border: 1px solid var(--glass-border);
        border-top: 1px solid var(--glass-shine);
        border-left: 1px solid var(--glass-shine);

        box-shadow: 0 30px 60px rgba(0, 0, 0, 0.8);
        padding: clamp(20px, 4vw, 40px); /* Fluid Padding */
        border-radius: 20px;
        animation: slideUp 0.6s ease-out forwards;
      }
      #typeDescription {
        font-size: 1.2rem;
        line-height: 1.6;
        color: #d0dbe6;
        margin-bottom: 30px;
        text-align: justify;
      }

      /* GRAPH STYLES */
      .stats-grid {
        display: flex;
        flex-direction: column;
        gap: 25px;
      }
      .stat-row {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .stat-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: clamp(0.9rem, 2vw, 1.1rem); /* Fluid text */
        font-weight: 600;
        letter-spacing: 1px;
        text-transform: uppercase;
      }
      .label-left {
        color: var(--highlight);
        text-shadow: 0 0 10px rgba(0, 242, 255, 0.4);
      }
      .label-right {
        color: var(--contrast);
        text-shadow: 0 0 10px rgba(41, 121, 255, 0.4);
      }

      .bar-container {
        width: 100%;
        height: 16px;
        background: rgba(0, 0, 0, 0.3);
        box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.5);
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.05);
        overflow: hidden;
        display: flex;
        position: relative;
        gap: 2px;
      }

      .bar-segment {
        height: 100%;
        transition: width 0.8s cubic-bezier(0.22, 1, 0.36, 1);
      }

      .bar-left {
        background: var(--highlight);
        width: 0%;
        box-shadow: 0 0 15px var(--highlight);
      }
      .bar-right {
        background: var(--contrast);
        width: 0%;
        box-shadow: 0 0 15px var(--contrast);
      }

      .bar-container::after {
        content: "";
        position: absolute;
        left: 50%;
        top: 0;
        bottom: 0;
        width: 1px;
        background: rgba(255, 255, 255, 0.5);
        transform: translateX(-50%);
        z-index: 10;
        opacity: 0.5;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(40px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .fade-out {
        opacity: 0;
        transition: opacity 0.5s ease;
      }

      /* --- MOBILE TWEAKS --- */
      @media (max-width: 900px) {
        .dashboard-wrapper {
          gap: 30px;
        }
        .content-card {
          padding: 25px;
        }
      }
    </style>
  </head>
  <body>
    <div class="animated-bg"></div>
    <canvas id="particleCanvas"></canvas>

    <div class="dashboard-wrapper">
      <div class="type-section">
        <h2>Archetype Identified</h2>
        <div id="resultType"></div>
        <button class="btn-glow" onclick="goToRecommendation()">
          Unlock Potential
        </button>
      </div>

      <div class="content-card">
        <p id="typeDescription">Loading analysis...</p>

        <h3
          style="
            color: #fff;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 25px;
            font-size: 1.3rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 10px;
          "
        >
          Cognitive Composition
        </h3>

        <div class="stats-grid" id="statsGrid"></div>
      </div>
    </div>

    <script>
      const canvas = document.getElementById("particleCanvas");
      const ctx = canvas.getContext("2d");
      let particles = [];
      function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      window.addEventListener("resize", resize);
      resize();
      class Particle {
        constructor() {
          this.x = Math.random() * canvas.width;
          this.y = Math.random() * canvas.height;
          this.vy = Math.random() * 0.5 + 0.3;
          this.size = Math.random() * 2 + 1;
          this.op = Math.random() * 0.5 + 0.2;
        }
        update() {
          this.y += this.vy;
          this.x += Math.sin(this.y * 0.01) * 0.3;
          if (this.y > canvas.height) {
            this.y = -10;
            this.x = Math.random() * canvas.width;
          }
        }
        draw() {
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
          ctx.fillStyle = `rgba(255,255,255,${this.op})`;
          ctx.fill();
        }
      }
      for (let i = 0; i < 100; i++) particles.push(new Particle());
      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach((p) => {
          p.update();
          p.draw();
        });
        requestAnimationFrame(animate);
      }
      animate();

      const user = localStorage.getItem("mbtiUser") || "";

      const result = localStorage.getItem("mbtiResult");

      const stats = JSON.parse(localStorage.getItem("mbtiStats")) || {
        E: 50,
        I: 50,
        S: 50,
        N: 50,
        T: 50,
        F: 50,
        J: 50,
        P: 50,
      };

      if (!result) window.location.href = "home.html";
      document.getElementById("resultType").textContent = result;

      const descriptions = {
        INTJ: "INTJ – The Architect: INTJ are visionary thinkers who prefer strategy over spontaneity and depth over small talk. They crave logic, purpose, and efficiency, often seeing flaws in systems that others overlook. Behind their calm, reserved demeanor lies a mind constantly analyzing, planning, and optimizing. Though they may seem detached, INTJs are deeply driven by their inner values and personal growth. They often prefer working independently, not because they dislike people, but because they trust their own ability to get things done right. Often misunderstood as cold, INTJs actually care deeply — they just express it through action and solution-focused thinking rather than emotion. When committed to a goal or vision, they will stop at nothing to bring it to life",
        INTP: "INTP – The Logician: INTP are curious, brilliant, and often live inside their own minds — constantly questioning, theorizing, and connecting abstract dots that others miss. They are natural inventors, thinkers, and independent explorers of ideas. Driven by a desire to understand why things work the way they do, INTPs often come across as quiet but mentally sharp, with occasional bursts of passionate ideas. They thrive when given the freedom to follow their own logic and can become completely absorbed in deep thought. Emotionally, they may struggle to express themselves, but they value authenticity and truth above all. If you want a fresh, unconventional idea or a new way of looking at something — ask an INTP.",
        ENTJ: "ENTJ – The Commander: ENTJ are natural-born leaders, defined by their ambition, clarity, and relentless drive. They see inefficiency as a personal challenge and are quick to organize teams, lead conversations, and set bold goals. ENTJs are confident and assertive, often with a strong presence that commands attention in any room. Though they may seem intimidating, they are deeply goal-oriented — not just for themselves, but for the success of the systems or people they care about. They appreciate intelligence, quick thinking, and results. Emotion doesn't guide their decisions, but respect and competence matter greatly to them. When focused, ENTJs are unstoppable forces who thrive on challenge and growth.",
        ENTP: "ENTP – The Debater: ENTP are energetic idea-machines — spontaneous, inventive, and known for their sharp minds and even sharper tongues. They love playing with concepts, questioning assumptions, and challenging conventional thinking. ENTPs get bored easily, which is why they thrive in dynamic environments that allow them to think freely and pivot quickly. They often charm others with their wit, humor, and confidence, and they love a good intellectual debate — not because they want to win, but because they want to learn. Beneath their playfulness lies a deep thinker who craves meaning, adventure, and mental stimulation. If something excites their curiosity, they’ll dive in headfirst, fully immersed in exploration.",
        INFJ: "INFJ – The Advocate: INFJ are deep-feeling, intuitive idealists who move through the world with quiet conviction and emotional insight. They are often drawn to helping others, improving society, and working behind the scenes toward meaningful change. INFJs are deeply private, yet emotionally intense — they often sense what others feel without being told. Their vision is long-term, their purpose is rooted in values, and they often carry a quiet strength that others admire but rarely understand. Though sensitive, INFJs are also strategic, organized, and capable of remarkable achievements when aligned with a mission they believe in.",
        INFP: "INFP – The Mediator: INFP are gentle dreamers with a rich inner world, a powerful sense of compassion, and an unshakable connection to their values. They often feel emotions deeply — their own and others' — and long for authentic, meaningful relationships. INFPs express themselves through creativity, writing, or quiet acts of kindness. They may appear shy or reserved, but beneath that surface is a passionate idealist constantly imagining a better world. They dislike conflict but are not weak — when their core values are threatened, they can be surprisingly firm and even fierce.",
        ENFJ: "ENFJ – The Protagonist: ENFJ are charismatic leaders and heart-driven motivators, known for their emotional intelligence, empathy, and vision. They thrive in group settings where they can uplift and support others, and are often seen as mentors or natural guides. ENFJs are articulate and persuasive, able to communicate ideas in ways that inspire belief and cooperation. At their best, they blend purpose with compassion — helping others grow while also moving toward a meaningful goal. Though they can overextend themselves, their warmth and strength leave a lasting impact wherever they go.",
        ENFP: "ENFP – The Campaigner: ENFP are magnetic, spontaneous, and deeply curious about people and the world. Their minds race with ideas, dreams, and possibilities, and they have an uncanny ability to make others feel seen, valued, and excited about life. ENFPs are creative, emotionally aware, and thrive on authentic connections. While they can struggle with consistency or overcommitment, their passion and optimism are infectious. They’re the first to say “yes” to adventure, challenge the norm, and uplift others with heartfelt enthusiasm and belief in what could be.",
        ISTJ: "ISTJ – The Logistician: ISTJ are responsible, loyal, and methodical. They value tradition, honesty, and doing things the right way — even when no one is watching. Quiet and reserved, ISTJs don’t seek the spotlight but often end up being the steady force behind any successful team or family. They thrive on routines and take great pride in fulfilling their duties with care and precision. Though emotionally reserved, ISTJs show love through actions, not words — and their dependability often becomes the backbone others lean on.",
        ISFJ: "ISFJ – The Defender: ISFJ are gentle, nurturing, and incredibly attentive to the needs of others. Often called “the quiet guardians,” they are humble but strong, kind but firm, and thrive in environments where their effort supports those they love. They’re practical and detail-oriented, but also emotionally intuitive — often remembering the small things that make others feel valued. ISFJs are deeply loyal and often put others’ needs ahead of their own, which makes them natural caretakers and protectors in both personal and professional settings.",
        ESTJ: "ESTJ – The Executive: ESTJ are natural organizers who value order, productivity, and responsibility. They take charge with confidence and are happiest when managing people, systems, or structures to create efficiency. Logical and direct, they may come off as blunt, but their goal is always clarity and results. ESTJs thrive on routine, tradition, and measurable progress — they like knowing what works and getting it done. While they may not show emotion easily, their care comes through in leadership, structure, and consistency.",
        ESFJ: "ESFJ – The Consul: ESFJ are warm, friendly, and community-oriented. They’re the ones remembering birthdays, checking in, and making sure no one is left behind. Deeply loyal and generous, ESFJs find purpose in helping others and maintaining harmony. They are practical, reliable, and incredibly tuned in to social expectations — often serving as the emotional glue in group settings. Though they can struggle with criticism or change, their dedication to loved ones makes them dependable and compassionate anchors in both friendships and teams.",
        ISTP: "ISTP – The Virtuoso: ISTP are cool, collected, and incredibly skilled at hands-on problem solving. They have sharp minds, quick reflexes, and a love for understanding how things work. Whether it’s fixing, building, or experimenting, ISTPs learn by doing — and often excel in high-pressure, real-world situations. They’re independent, observant, and action-oriented, preferring to work alone or on their own terms. Though emotionally reserved, they’re loyal in their own quiet, matter-of-fact way, and live life by logic, not drama.",
        ISFP: "ISFP – The Adventurer: ISFP are soft-spoken yet deeply expressive, often communicating more through creativity than words. They are sensitive, adaptable, and drawn to beauty in all forms — whether in nature, art, or human connection. ISFPs live in the present moment, guided by emotion, experience, and a deep inner sense of what feels right. They dislike conflict and structure, preferring to go with the flow and follow their heart. Though quiet, their authenticity and gentle warmth leave a lasting impression.",
        ESTP: "ESTP – The Entrepreneur: ESTP are bold, confident, and quick to act. They’re at their best in fast-paced environments where they can solve problems on the spot and engage directly with the world. Known for their charisma and sharp wit, ESTPs love a challenge and enjoy taking risks — whether in business, sports, or conversation. They live by experience rather than theory and are masters of improvisation. While they may struggle with long-term planning, their energy and adaptability make them powerful forces in the now.",
        ESFP: "ESFP – The Entertainer: ESFP are vibrant, fun-loving, and deeply tuned in to their surroundings. They thrive on excitement, connection, and sensory experiences — often bringing joy and liveliness wherever they go. With a flair for drama and an eye for beauty, ESFPs love making others smile, whether through music, fashion, humor, or a spontaneous adventure. They are emotionally open and generous, living fully in the moment. Though they can struggle with boredom or long-term planning, they remind us all to embrace joy and connection.",
      };
      document.getElementById("typeDescription").textContent =
        descriptions[result] || "Analysis incomplete.";

      // --- RENDER GRAPHS ---
      const grid = document.getElementById("statsGrid");
      const pairs = [
        {
          left: "E",
          right: "I",
          labelL: "Extroversion",
          labelR: "Introversion",
        },
        { left: "S", right: "N", labelL: "Sensing", labelR: "Intuition" },
        { left: "T", right: "F", labelL: "Thinking", labelR: "Feeling" },
        { left: "J", right: "P", labelL: "Judging", labelR: "Perceiving" },
      ];

      pairs.forEach((p) => {
        let valL = stats[p.left] || 0;
        let valR = stats[p.right] || 0;

        // Normalize Calculation
        const total = valL + valR;
        if (total === 0) {
          valL = 50;
          valR = 50;
        } else {
          valL = Math.round((valL / total) * 100);
          valR = 100 - valL;
        }

        const html = `
                <div class="stat-row">
                    <div class="stat-header">
                        <span class="label-left">${p.labelL} ${valL}%</span>
                        <span class="label-right">${valR}% ${p.labelR}</span>
                    </div>
                    <div class="bar-container">
                        <div class="bar-segment bar-left" data-width="${valL}%"></div>
                        <div class="bar-segment bar-right" data-width="${valR}%"></div>
                    </div>
                </div>`;
        grid.innerHTML += html;
      });

      requestAnimationFrame(() => {
        document.querySelectorAll(".bar-segment").forEach((bar) => {
          bar.style.width = bar.dataset.width;
        });
      });

      function goToRecommendation() {
        if (user) localStorage.setItem("mbtiUser", user);
        localStorage.setItem("mbtiResult", result);
        document.body.classList.add("fade-out");
        setTimeout(() => {
          window.location.href = "recommendation.html";
        }, 500);
      }
    </script>
  </body>
</html>
